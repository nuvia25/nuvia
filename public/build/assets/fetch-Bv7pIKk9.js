var ie=new WeakMap;function he(e){const t=e instanceof Element?e:e instanceof Node?e.parentElement:null,r=t?t.closest("input, button"):null;return(r==null?void 0:r.type)=="submit"?r:null}function pe(e){const t=he(e.target);t&&t.form&&ie.set(t.form,t)}(function(){if("submitter"in Event.prototype)return;let e=window.Event.prototype;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))e=window.SubmitEvent.prototype;else if("SubmitEvent"in window)return;addEventListener("click",pe,!0),Object.defineProperty(e,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return ie.get(this.target)}})})();(function(e){if(typeof e.requestSubmit=="function")return;e.requestSubmit=function(n){n?(t(n,this),n.click()):(n=document.createElement("input"),n.type="submit",n.hidden=!0,this.appendChild(n),n.click(),this.removeChild(n))};function t(n,i){n instanceof HTMLElement||r(TypeError,"parameter 1 is not of type 'HTMLElement'"),n.type=="submit"||r(TypeError,"The specified element is not a submit button"),n.form==i||r(DOMException,"The specified element is not owned by this form element","NotFoundError")}function r(n,i,f){throw new n("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+i+".",f)}})(HTMLFormElement.prototype);var O={};async function me({method:e,action:t,body:r,referrer:n,headers:i},f){let a,d=ge(f),u=y=>y,w=y=>y;if(e==="GET"){if(a=we(t),be(t))return a;u=y=>z(t,E=>E.resolve(y)),w=y=>z(t,E=>E.reject(y))}n=n||window.location.href;let m=fetch(t,{headers:i,referrer:n,method:e,body:r}).then(d).then(ye).then(u).catch(w);return e==="GET"?a:m}function ye(e){return e.text().then(t=>(e.html=t,e))}function we(e){O[e]||(O[e]=[]);let t={},r=new Promise((n,i)=>{t.resolve=n,t.reject=i});return O[e].push(t),r}function be(e){return O[e].length>1}function z(e,t){(O[e]||[]).forEach(t),O[e]=void 0}function ge(e){return e?t=>t:t=>{if(t.redirected){window.location.href=t.url;return}return t}}function W(e,t,r){xe();let n,i,f,a,d,u,w,m,y;function E(o={}){let s=b=>b.getAttribute("key"),c=()=>{};a=o.updating||c,d=o.updated||c,u=o.removing||c,w=o.removed||c,m=o.adding||c,y=o.added||c,i=o.key||s,f=o.lookahead||!1}function v(o,s){if(A(o,s))return B(o,s);let c=!1;if(!L(a,o,s,()=>c=!0)){if(o.nodeType===1&&window.Alpine&&window.Alpine.cloneNode(o,s),Ee(s)){M(o,s),d(o,s);return}c||F(o,s),d(o,s),C(o,s)}}function A(o,s){return o.nodeType!=s.nodeType||o.nodeName!=s.nodeName||k(o)!=k(s)}function B(o,s){if(L(u,o))return;let c=s.cloneNode(!0);L(m,c)||(o.replaceWith(c),w(o),y(c))}function M(o,s){let c=s.nodeValue;o.nodeValue!==c&&(o.nodeValue=c)}function F(o,s){if(o._x_transitioning||o._x_isShown&&!s._x_isShown||!o._x_isShown&&s._x_isShown)return;let c=Array.from(o.attributes),b=Array.from(s.attributes);for(let h=c.length-1;h>=0;h--){let l=c[h].name;s.hasAttribute(l)||o.removeAttribute(l)}for(let h=b.length-1;h>=0;h--){let l=b[h].name,N=b[h].value;o.getAttribute(l)!==N&&o.setAttribute(l,N)}}function C(o,s){let c=H(o.children),b={},h=Y(s),l=Y(o);for(;h;){let g=k(h),S=k(l);if(!l)if(g&&b[g]){let p=b[g];o.appendChild(p),l=p}else{if(!L(m,h)){let p=h.cloneNode(!0);o.appendChild(p),y(p)}h=x(s,h);continue}let R=p=>p&&p.nodeType===8&&p.textContent===" __BLOCK__ ",D=p=>p&&p.nodeType===8&&p.textContent===" __ENDBLOCK__ ";if(R(h)&&R(l)){let p=0,I=l;for(;l;){let T=x(o,l);if(R(T))p++;else if(D(T)&&p>0)p--;else if(D(T)&&p===0){l=T;break}l=T}let le=l;p=0;let ue=h;for(;h;){let T=x(s,h);if(R(T))p++;else if(D(T)&&p>0)p--;else if(D(T)&&p===0){h=T;break}h=T}let de=h,ce=new q(I,le),fe=new q(ue,de);C(ce,fe);continue}if(l.nodeType===1&&f&&!l.isEqualNode(h)){let p=x(s,h),I=!1;for(;!I&&p;)p.nodeType===1&&l.isEqualNode(p)&&(I=!0,l=_(o,h,l),S=k(l)),p=x(s,p)}if(g!==S){if(!g&&S){b[S]=l,l=_(o,h,l),b[S].remove(),l=x(o,l),h=x(s,h);continue}if(g&&!S&&c[g]&&(l.replaceWith(c[g]),l=c[g]),g&&S){let p=c[g];if(p)b[S]=l,l.replaceWith(p),l=p;else{b[S]=l,l=_(o,h,l),b[S].remove(),l=x(o,l),h=x(s,h);continue}}}let se=l&&x(o,l);v(l,h),h=h&&x(s,h),l=se}let N=[];for(;l;)L(u,l)||N.push(l),l=x(o,l);for(;N.length;){let g=N.shift();g.remove(),w(g)}}function k(o){return o&&o.nodeType===1&&i(o)}function H(o){let s={};for(let c of o){let b=k(c);b&&(s[b]=c)}return s}function _(o,s,c){if(!L(m,s)){let b=s.cloneNode(!0);return o.insertBefore(b,c),y(b),b}return s}return E(r),n=typeof t=="string"?ve(t):t,window.Alpine&&window.Alpine.closestDataStack&&!e._x_dataStack&&(n._x_dataStack=window.Alpine.closestDataStack(e),n._x_dataStack&&window.Alpine.cloneNode(e,n)),v(e,n),n=void 0,e}W.step=()=>{};W.log=()=>{};function L(e,...t){let r=!1;return e(...t,()=>r=!0),r}var Q=!1;function ve(e){const t=document.createElement("template");return t.innerHTML=e,t.content.firstElementChild}function Ee(e){return e.nodeType===3||e.nodeType===8}var q=class{constructor(e,t){this.startComment=e,this.endComment=t}get children(){let e=[],t=this.startComment.nextSibling;for(;t!==void 0&&t!==this.endComment;)e.push(t),t=t.nextSibling;return e}appendChild(e){this.endComment.before(e)}get firstChild(){let e=this.startComment.nextSibling;if(e!==this.endComment)return e}nextNode(e){let t=e.nextSibling;if(t!==this.endComment)return t}insertBefore(e,t){return t.before(e),e}};function Y(e){return e.firstChild}function x(e,t){if(t._x_teleport)return t._x_teleport;if(t.teleportBack)return t.teleportBack;let r;return e instanceof q?r=e.nextNode(t):r=t.nextSibling,r}function xe(){if(Q)return;Q=!0;let e=Element.prototype.setAttribute,t=document.createElement("div");Element.prototype.setAttribute=function(n,i){if(!n.includes("@"))return e.call(this,n,i);t.innerHTML=`<span ${n}="${i}"></span>`;let f=t.firstElementChild.getAttributeNode(n);t.firstElementChild.removeAttributeNode(f),this.setAttributeNode(f)}}var j={followRedirects:!0,mergeStrategy:"replace"},Z=new WeakMap,$=new WeakMap;function P(e){window.addEventListener("popstate",t=>{!t.state||!t.state.__AJAX__||window.location.reload(!0)}),e.directive("target",(t,{modifiers:r,expression:n},{evaluate:i,cleanup:f})=>{let a={targets:ee(t,n),events:!0,...Ae(r)};Z.set(t,a),a.headers=i(e.bound(t,"x-headers","{}")),ke(t)?f(Ce(t,a)):_e(t)&&f(Le(t,a))}),e.addInitSelector(()=>`[${e.prefixed("merge")}]`),e.directive("merge",(t,{modifiers:r,expression:n})=>{$.set(t,{strategy:n,transition:Se(r)})}),e.magic("ajax",t=>(r,n={})=>{let i=n.method?n.method.toUpperCase():"GET",f=null;if(n.body){if(n.body instanceof HTMLFormElement)f=new FormData(n.body);else{f=new FormData;for(let y in n.body)f.append(y,n.body[y])}i==="GET"&&(r=oe(f,r),f=null)}let a=n.headers;a||(a=t.hasAttribute("x-headers")?e.evaluate(t,e.bound(t,"x-headers","{}")):{});let d={action:r,method:i,body:f,headers:a,referrer:J(t)};console.log(d);let u=Z.get(t)||{followRedirects:j.followRedirects,history:!1};u=Object.assign(u,n);let w=ee(t,u.targets||u.target),m=V(w);return m=u.sync?X(m):m,G(d,m,t,u)})}P.configure=e=>(j=Object.assign(j,e),P);var Te=P;function ee(e,t=null){let r=[e.id];if(t&&(r=Array.isArray(t)?t:t.split(" ")),r=r.filter(n=>n),r.length===0)throw new ae(e);return r}function Ae(e=[]){let t=j.followRedirects?!e.includes("nofollow"):e.includes("follow"),r=!1;return e.includes("push")&&(r="push"),e.includes("replace")&&(r="replace"),{followRedirects:t,history:r}}function Se(e=[]){return j.transitions||e.includes("transition")}function ke(e){return e.href&&!e.hash&&e.origin==location.origin}function _e(e){return e.tagName==="FORM"}function Ce(e,t){let r=async n=>{n.preventDefault(),n.stopPropagation();let i=Ne(e);i.headers=t.headers||{};let f=X(V(t.targets));try{return await G(i,f,e,t)}catch(a){if(a instanceof U){console.warn(a.message),window.location.href=e.href;return}throw a}};return e.addEventListener("click",r),()=>e.removeEventListener("click",r)}function Ne(e){return{method:"GET",action:e.href,referrer:J(e),body:null}}function Le(e,t){let r=async n=>{if(n.submitter&&n.submitter.hasAttribute("formnoajax"))return;n.preventDefault(),n.stopPropagation();let i=Oe(e,n.submitter);i.headers=t.headers||{};let f=X(V(t.targets));try{return await je(n.submitter,()=>G(i,f,e,t))}catch(a){if(a instanceof U){console.warn(a.message),e.removeEventListener("submit",r),e.requestSubmit(n.submitter);return}throw a}};return e.addEventListener("submit",r),()=>e.removeEventListener("submit",r)}function Oe(e,t=null){let r=(e.getAttribute("method")||"GET").toUpperCase(),n=J(e),i=e.getAttribute("action")||n||window.location.href,f=new FormData(e);return t&&t.name&&f.append(t.name,t.value),r==="GET"&&(i=oe(f,i),f=null),{method:r,action:i,body:f,referrer:n}}async function je(e,t){if(!e)return await t();let r=i=>i.preventDefault();e.setAttribute("aria-disabled","true"),e.addEventListener("click",r);let n=await t();return e.removeAttribute("aria-disabled"),e.removeEventListener("click",r),n}function oe(e,t){let r=Array.from(e.entries()).filter(([n,i])=>i!==""||i!==null);if(r.length){let n=t.split("#"),i=n[1];n=n[0].split("?"),t=n[0]+"?"+new URLSearchParams(r),i&&(t+="#"+i)}return t}async function G(e,t,r,n){let i=()=>!0;if(n.events&&(i=(m,y,E)=>m.dispatchEvent(new CustomEvent(y,{detail:E,bubbles:!0,composed:!0,cancelable:!0}))),!i(r,"ajax:before"))return;let f=[];t.forEach(m=>{m.setAttribute("aria-busy","true"),f.push(m.id)}),e.headers["X-Alpine-Request"]="true",e.headers["X-Alpine-Target"]=f.join("  ");let a=await me(e,n.followRedirects);if(a.ok?i(r,"ajax:success",a):i(r,"ajax:error",a),i(r,"ajax:after",a),!a.html)return;let d=document.createRange().createContextualFragment(a.html),u=t.map(async m=>{var A;let y=d.getElementById(m.id),E=((A=$.get(m))==null?void 0:A.strategy)||j.mergeStrategy;if(!y){if(!i(r,"ajax:missing",a))return;if(m.hasAttribute("x-sync")||console.warn(`Target #${m.id} not found in AJAX response.`),a.ok)return await te(E,m,m.cloneNode(!1));throw new U(r)}let v=await te(E,m,y);return v&&(v.removeAttribute("aria-busy"),v.dataset.source=a.url),v});t=await Promise.all(u);let w=r.getAttribute("x-focus");return w&&Fe(document.getElementById(w)),n.history&&Be(n.history,a.url),t}async function te(e,t,r){var a;let n={before(d,u){return d.before(...u.childNodes),d},replace(d,u){return d.replaceWith(u),u},update(d,u){return d.replaceChildren(...u.childNodes),d},prepend(d,u){return d.prepend(...u.childNodes),d},append(d,u){return d.append(...u.childNodes),d},after(d,u){return d.after(...u.childNodes),d},morph(d,u){return W(d,u),document.getElementById(u.id)}};if(!((a=$.get(t))!=null&&a.transition)||!document.startViewTransition)return n[e](t,r);let i=null;return await document.startViewTransition(()=>(i=n[e](t,r),Promise.resolve())).updateCallbackDone,i}function Fe(e){e&&setTimeout(()=>{e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.focus()},0)}function Be(e,t){return{push:()=>window.history.pushState({__AJAX__:!0},"",t),replace:()=>window.history.replaceState({__AJAX__:!0},"",t)}[e]()}function V(e=[]){return e.map(t=>{let r=document.getElementById(t);if(!r)throw new Me(t);return r})}function X(e){return document.querySelectorAll("[x-sync]").forEach(t=>{if(!t.id)throw new ae(t);e.some(r=>r.id===t.id)||e.push(t)}),e}function J(e){var t;return(t=e.closest("[data-source]"))==null?void 0:t.dataset.source}var ae=class extends Error{constructor(e){let t=(e.outerHTML.match(/<[^>]+>/)??[])[0]??"[Element]";super(`${t} is missing an ID to target.`),this.name="Missing ID"}},Me=class extends Error{constructor(e){super(`#${e} was not found in the current document.`),this.name="Missing Target"}},U=class extends Error{constructor(e){let t=(e.outerHTML.match(/<[^>]+>/)??[])[0]??"[Element]";super(`${t} received a failed response.`),this.name="Failed Response"}},We=Te;async function Re(e,t){const r=e.getReader();let n;for(;!(n=await r.read()).done;)t(n.value)}function De(e){let t,r,n,i=!1;return function(a){t===void 0?(t=a,r=0,n=-1):t=He(t,a);const d=t.length;let u=0;for(;r<d;){i&&(t[r]===10&&(u=++r),i=!1);let w=-1;for(;r<d&&w===-1;++r)switch(t[r]){case 58:n===-1&&(n=r-u);break;case 13:i=!0;case 10:w=r;break}if(w===-1)break;e(t.subarray(u,w),n),u=r,n=-1}u===d?t=void 0:u!==0&&(t=t.subarray(u),r-=u)}}function Ie(e,t,r){let n=ne();const i=new TextDecoder;return function(a,d){if(a.length===0)r==null||r(n),n=ne();else if(d>0){const u=i.decode(a.subarray(0,d)),w=d+(a[d+1]===32?2:1),m=i.decode(a.subarray(w));switch(u){case"data":n.data=n.data?n.data+`
`+m:m;break;case"event":n.event=m;break;case"id":e(n.id=m);break;case"retry":const y=parseInt(m,10);isNaN(y)||t(n.retry=y);break}}}}function He(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function ne(){return{data:"",event:"",id:"",retry:void 0}}var qe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const K="text/event-stream",Pe=1e3,re="last-event-id";function $e(e,t){var{signal:r,headers:n,onopen:i,onmessage:f,onclose:a,onerror:d,openWhenHidden:u,fetch:w}=t,m=qe(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((y,E)=>{const v=Object.assign({},n);v.accept||(v.accept=K);let A;function B(){A.abort(),document.hidden||_()}u||document.addEventListener("visibilitychange",B);let M=Pe,F=0;function C(){document.removeEventListener("visibilitychange",B),window.clearTimeout(F),A.abort()}r==null||r.addEventListener("abort",()=>{C(),y()});const k=w??window.fetch,H=i??Ke;async function _(){var o;A=new AbortController;try{const s=await k(e,Object.assign(Object.assign({},m),{headers:v,signal:A.signal}));await H(s),await Re(s.body,De(Ie(c=>{c?v[re]=c:delete v[re]},c=>{M=c},f))),a==null||a(),C(),y()}catch(s){if(!A.signal.aborted)try{const c=(o=d==null?void 0:d(s))!==null&&o!==void 0?o:M;window.clearTimeout(F),F=window.setTimeout(_,c)}catch(c){C(),E(c)}}}_()})}function Ke(e){const t=e.headers.get("content-type");if(!(t!=null&&t.startsWith(K)))throw new Error(`Expected content-type to be ${K}, Actual: ${t}`)}export{$e as f,We as m};
