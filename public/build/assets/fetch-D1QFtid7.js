var ie=new WeakMap;function he(e){const t=e instanceof Element?e:e instanceof Node?e.parentElement:null,r=t?t.closest("input, button"):null;return r?.type=="submit"?r:null}function pe(e){const t=he(e.target);t&&t.form&&ie.set(t.form,t)}(function(){if("submitter"in Event.prototype)return;let e=window.Event.prototype;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))e=window.SubmitEvent.prototype;else if("SubmitEvent"in window)return;addEventListener("click",pe,!0),Object.defineProperty(e,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return ie.get(this.target)}})})();(function(e){if(typeof e.requestSubmit=="function")return;e.requestSubmit=function(n){n?(t(n,this),n.click()):(n=document.createElement("input"),n.type="submit",n.hidden=!0,this.appendChild(n),n.click(),this.removeChild(n))};function t(n,o){n instanceof HTMLElement||r(TypeError,"parameter 1 is not of type 'HTMLElement'"),n.type=="submit"||r(TypeError,"The specified element is not a submit button"),n.form==o||r(DOMException,"The specified element is not owned by this form element","NotFoundError")}function r(n,o,c){throw new n("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+o+".",c)}})(HTMLFormElement.prototype);var O={};async function me({method:e,action:t,body:r,referrer:n,headers:o},c){let i,u=ge(c),m=y=>y,w=y=>y;if(e==="GET"){if(i=we(t),be(t))return i;m=y=>z(t,E=>E.resolve(y)),w=y=>z(t,E=>E.reject(y))}n=n||window.location.href;let p=fetch(t,{headers:o,referrer:n,method:e,body:r}).then(u).then(ye).then(m).catch(w);return e==="GET"?i:p}function ye(e){return e.text().then(t=>(e.html=t,e))}function we(e){O[e]||(O[e]=[]);let t={},r=new Promise((n,o)=>{t.resolve=n,t.reject=o});return O[e].push(t),r}function be(e){return O[e].length>1}function z(e,t){(O[e]||[]).forEach(t),O[e]=void 0}function ge(e){return e?t=>t:t=>{if(t.redirected){window.location.href=t.url;return}return t}}function W(e,t,r){xe();let n,o,c,i,u,m,w,p,y;function E(a={}){let s=b=>b.getAttribute("key"),d=()=>{};i=a.updating||d,u=a.updated||d,m=a.removing||d,w=a.removed||d,p=a.adding||d,y=a.added||d,o=a.key||s,c=a.lookahead||!1}function v(a,s){if(k(a,s))return B(a,s);let d=!1;if(!L(i,a,s,()=>d=!0)){if(a.nodeType===1&&window.Alpine&&window.Alpine.cloneNode(a,s),Ee(s)){M(a,s),u(a,s);return}d||F(a,s),u(a,s),C(a,s)}}function k(a,s){return a.nodeType!=s.nodeType||a.nodeName!=s.nodeName||S(a)!=S(s)}function B(a,s){if(L(m,a))return;let d=s.cloneNode(!0);L(p,d)||(a.replaceWith(d),w(a),y(d))}function M(a,s){let d=s.nodeValue;a.nodeValue!==d&&(a.nodeValue=d)}function F(a,s){if(a._x_transitioning||a._x_isShown&&!s._x_isShown||!a._x_isShown&&s._x_isShown)return;let d=Array.from(a.attributes),b=Array.from(s.attributes);for(let f=d.length-1;f>=0;f--){let l=d[f].name;s.hasAttribute(l)||a.removeAttribute(l)}for(let f=b.length-1;f>=0;f--){let l=b[f].name,N=b[f].value;a.getAttribute(l)!==N&&a.setAttribute(l,N)}}function C(a,s){let d=H(a.children),b={},f=Y(s),l=Y(a);for(;f;){let g=S(f),A=S(l);if(!l)if(g&&b[g]){let h=b[g];a.appendChild(h),l=h}else{if(!L(p,f)){let h=f.cloneNode(!0);a.appendChild(h),y(h)}f=x(s,f);continue}let R=h=>h&&h.nodeType===8&&h.textContent===" __BLOCK__ ",D=h=>h&&h.nodeType===8&&h.textContent===" __ENDBLOCK__ ";if(R(f)&&R(l)){let h=0,I=l;for(;l;){let T=x(a,l);if(R(T))h++;else if(D(T)&&h>0)h--;else if(D(T)&&h===0){l=T;break}l=T}let le=l;h=0;let ue=f;for(;f;){let T=x(s,f);if(R(T))h++;else if(D(T)&&h>0)h--;else if(D(T)&&h===0){f=T;break}f=T}let de=f,ce=new q(I,le),fe=new q(ue,de);C(ce,fe);continue}if(l.nodeType===1&&c&&!l.isEqualNode(f)){let h=x(s,f),I=!1;for(;!I&&h;)h.nodeType===1&&l.isEqualNode(h)&&(I=!0,l=_(a,f,l),A=S(l)),h=x(s,h)}if(g!==A){if(!g&&A){b[A]=l,l=_(a,f,l),b[A].remove(),l=x(a,l),f=x(s,f);continue}if(g&&!A&&d[g]&&(l.replaceWith(d[g]),l=d[g]),g&&A){let h=d[g];if(h)b[A]=l,l.replaceWith(h),l=h;else{b[A]=l,l=_(a,f,l),b[A].remove(),l=x(a,l),f=x(s,f);continue}}}let se=l&&x(a,l);v(l,f),f=f&&x(s,f),l=se}let N=[];for(;l;)L(m,l)||N.push(l),l=x(a,l);for(;N.length;){let g=N.shift();g.remove(),w(g)}}function S(a){return a&&a.nodeType===1&&o(a)}function H(a){let s={};for(let d of a){let b=S(d);b&&(s[b]=d)}return s}function _(a,s,d){if(!L(p,s)){let b=s.cloneNode(!0);return a.insertBefore(b,d),y(b),b}return s}return E(r),n=typeof t=="string"?ve(t):t,window.Alpine&&window.Alpine.closestDataStack&&!e._x_dataStack&&(n._x_dataStack=window.Alpine.closestDataStack(e),n._x_dataStack&&window.Alpine.cloneNode(e,n)),v(e,n),n=void 0,e}W.step=()=>{};W.log=()=>{};function L(e,...t){let r=!1;return e(...t,()=>r=!0),r}var Q=!1;function ve(e){const t=document.createElement("template");return t.innerHTML=e,t.content.firstElementChild}function Ee(e){return e.nodeType===3||e.nodeType===8}var q=class{constructor(e,t){this.startComment=e,this.endComment=t}get children(){let e=[],t=this.startComment.nextSibling;for(;t!==void 0&&t!==this.endComment;)e.push(t),t=t.nextSibling;return e}appendChild(e){this.endComment.before(e)}get firstChild(){let e=this.startComment.nextSibling;if(e!==this.endComment)return e}nextNode(e){let t=e.nextSibling;if(t!==this.endComment)return t}insertBefore(e,t){return t.before(e),e}};function Y(e){return e.firstChild}function x(e,t){if(t._x_teleport)return t._x_teleport;if(t.teleportBack)return t.teleportBack;let r;return e instanceof q?r=e.nextNode(t):r=t.nextSibling,r}function xe(){if(Q)return;Q=!0;let e=Element.prototype.setAttribute,t=document.createElement("div");Element.prototype.setAttribute=function(n,o){if(!n.includes("@"))return e.call(this,n,o);t.innerHTML=`<span ${n}="${o}"></span>`;let c=t.firstElementChild.getAttributeNode(n);t.firstElementChild.removeAttributeNode(c),this.setAttributeNode(c)}}var j={followRedirects:!0,mergeStrategy:"replace"},Z=new WeakMap,$=new WeakMap;function P(e){window.addEventListener("popstate",t=>{!t.state||!t.state.__AJAX__||window.location.reload(!0)}),e.directive("target",(t,{modifiers:r,expression:n},{evaluate:o,cleanup:c})=>{let i={targets:ee(t,n),events:!0,...Ae(r)};Z.set(t,i),i.headers=o(e.bound(t,"x-headers","{}")),ke(t)?c(Ce(t,i)):_e(t)&&c(Le(t,i))}),e.addInitSelector(()=>`[${e.prefixed("merge")}]`),e.directive("merge",(t,{modifiers:r,expression:n})=>{$.set(t,{strategy:n,transition:Se(r)})}),e.magic("ajax",t=>(r,n={})=>{let o=n.method?n.method.toUpperCase():"GET",c=null;if(n.body){if(n.body instanceof HTMLFormElement)c=new FormData(n.body);else{c=new FormData;for(let y in n.body)c.append(y,n.body[y])}o==="GET"&&(r=oe(c,r),c=null)}let i=n.headers;i||(i=t.hasAttribute("x-headers")?e.evaluate(t,e.bound(t,"x-headers","{}")):{});let u={action:r,method:o,body:c,headers:i,referrer:J(t)};console.log(u);let m=Z.get(t)||{followRedirects:j.followRedirects,history:!1};m=Object.assign(m,n);let w=ee(t,m.targets||m.target),p=V(w);return p=m.sync?X(p):p,G(u,p,t,m)})}P.configure=e=>(j=Object.assign(j,e),P);var Te=P;function ee(e,t=null){let r=[e.id];if(t&&(r=Array.isArray(t)?t:t.split(" ")),r=r.filter(n=>n),r.length===0)throw new ae(e);return r}function Ae(e=[]){let t=j.followRedirects?!e.includes("nofollow"):e.includes("follow"),r=!1;return e.includes("push")&&(r="push"),e.includes("replace")&&(r="replace"),{followRedirects:t,history:r}}function Se(e=[]){return j.transitions||e.includes("transition")}function ke(e){return e.href&&!e.hash&&e.origin==location.origin}function _e(e){return e.tagName==="FORM"}function Ce(e,t){let r=async n=>{n.preventDefault(),n.stopPropagation();let o=Ne(e);o.headers=t.headers||{};let c=X(V(t.targets));try{return await G(o,c,e,t)}catch(i){if(i instanceof U){console.warn(i.message),window.location.href=e.href;return}throw i}};return e.addEventListener("click",r),()=>e.removeEventListener("click",r)}function Ne(e){return{method:"GET",action:e.href,referrer:J(e),body:null}}function Le(e,t){let r=async n=>{if(n.submitter&&n.submitter.hasAttribute("formnoajax"))return;n.preventDefault(),n.stopPropagation();let o=Oe(e,n.submitter);o.headers=t.headers||{};let c=X(V(t.targets));try{return await je(n.submitter,()=>G(o,c,e,t))}catch(i){if(i instanceof U){console.warn(i.message),e.removeEventListener("submit",r),e.requestSubmit(n.submitter);return}throw i}};return e.addEventListener("submit",r),()=>e.removeEventListener("submit",r)}function Oe(e,t=null){let r=(e.getAttribute("method")||"GET").toUpperCase(),n=J(e),o=e.getAttribute("action")||n||window.location.href,c=new FormData(e);return t&&t.name&&c.append(t.name,t.value),r==="GET"&&(o=oe(c,o),c=null),{method:r,action:o,body:c,referrer:n}}async function je(e,t){if(!e)return await t();let r=o=>o.preventDefault();e.setAttribute("aria-disabled","true"),e.addEventListener("click",r);let n=await t();return e.removeAttribute("aria-disabled"),e.removeEventListener("click",r),n}function oe(e,t){let r=Array.from(e.entries()).filter(([n,o])=>o!==""||o!==null);if(r.length){let n=t.split("#"),o=n[1];n=n[0].split("?"),t=n[0]+"?"+new URLSearchParams(r),o&&(t+="#"+o)}return t}async function G(e,t,r,n){let o=()=>!0;if(n.events&&(o=(p,y,E)=>p.dispatchEvent(new CustomEvent(y,{detail:E,bubbles:!0,composed:!0,cancelable:!0}))),!o(r,"ajax:before"))return;let c=[];t.forEach(p=>{p.setAttribute("aria-busy","true"),c.push(p.id)}),e.headers["X-Alpine-Request"]="true",e.headers["X-Alpine-Target"]=c.join("  ");let i=await me(e,n.followRedirects);if(i.ok?o(r,"ajax:success",i):o(r,"ajax:error",i),o(r,"ajax:after",i),!i.html)return;let u=document.createRange().createContextualFragment(i.html),m=t.map(async p=>{let y=u.getElementById(p.id),E=$.get(p)?.strategy||j.mergeStrategy;if(!y){if(!o(r,"ajax:missing",i))return;if(p.hasAttribute("x-sync")||console.warn(`Target #${p.id} not found in AJAX response.`),i.ok)return await te(E,p,p.cloneNode(!1));throw new U(r)}let v=await te(E,p,y);return v&&(v.removeAttribute("aria-busy"),v.dataset.source=i.url),v});t=await Promise.all(m);let w=r.getAttribute("x-focus");return w&&Fe(document.getElementById(w)),n.history&&Be(n.history,i.url),t}async function te(e,t,r){let n={before(i,u){return i.before(...u.childNodes),i},replace(i,u){return i.replaceWith(u),u},update(i,u){return i.replaceChildren(...u.childNodes),i},prepend(i,u){return i.prepend(...u.childNodes),i},append(i,u){return i.append(...u.childNodes),i},after(i,u){return i.after(...u.childNodes),i},morph(i,u){return W(i,u),document.getElementById(u.id)}};if(!$.get(t)?.transition||!document.startViewTransition)return n[e](t,r);let o=null;return await document.startViewTransition(()=>(o=n[e](t,r),Promise.resolve())).updateCallbackDone,o}function Fe(e){e&&setTimeout(()=>{e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.focus()},0)}function Be(e,t){return{push:()=>window.history.pushState({__AJAX__:!0},"",t),replace:()=>window.history.replaceState({__AJAX__:!0},"",t)}[e]()}function V(e=[]){return e.map(t=>{let r=document.getElementById(t);if(!r)throw new Me(t);return r})}function X(e){return document.querySelectorAll("[x-sync]").forEach(t=>{if(!t.id)throw new ae(t);e.some(r=>r.id===t.id)||e.push(t)}),e}function J(e){return e.closest("[data-source]")?.dataset.source}var ae=class extends Error{constructor(e){let t=(e.outerHTML.match(/<[^>]+>/)??[])[0]??"[Element]";super(`${t} is missing an ID to target.`),this.name="Missing ID"}},Me=class extends Error{constructor(e){super(`#${e} was not found in the current document.`),this.name="Missing Target"}},U=class extends Error{constructor(e){let t=(e.outerHTML.match(/<[^>]+>/)??[])[0]??"[Element]";super(`${t} received a failed response.`),this.name="Failed Response"}},We=Te;async function Re(e,t){const r=e.getReader();let n;for(;!(n=await r.read()).done;)t(n.value)}function De(e){let t,r,n,o=!1;return function(i){t===void 0?(t=i,r=0,n=-1):t=He(t,i);const u=t.length;let m=0;for(;r<u;){o&&(t[r]===10&&(m=++r),o=!1);let w=-1;for(;r<u&&w===-1;++r)switch(t[r]){case 58:n===-1&&(n=r-m);break;case 13:o=!0;case 10:w=r;break}if(w===-1)break;e(t.subarray(m,w),n),m=r,n=-1}m===u?t=void 0:m!==0&&(t=t.subarray(m),r-=m)}}function Ie(e,t,r){let n=ne();const o=new TextDecoder;return function(i,u){if(i.length===0)r?.(n),n=ne();else if(u>0){const m=o.decode(i.subarray(0,u)),w=u+(i[u+1]===32?2:1),p=o.decode(i.subarray(w));switch(m){case"data":n.data=n.data?n.data+`
`+p:p;break;case"event":n.event=p;break;case"id":e(n.id=p);break;case"retry":const y=parseInt(p,10);isNaN(y)||t(n.retry=y);break}}}}function He(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function ne(){return{data:"",event:"",id:"",retry:void 0}}var qe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};const K="text/event-stream",Pe=1e3,re="last-event-id";function $e(e,t){var{signal:r,headers:n,onopen:o,onmessage:c,onclose:i,onerror:u,openWhenHidden:m,fetch:w}=t,p=qe(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((y,E)=>{const v=Object.assign({},n);v.accept||(v.accept=K);let k;function B(){k.abort(),document.hidden||_()}m||document.addEventListener("visibilitychange",B);let M=Pe,F=0;function C(){document.removeEventListener("visibilitychange",B),window.clearTimeout(F),k.abort()}r?.addEventListener("abort",()=>{C(),y()});const S=w??window.fetch,H=o??Ke;async function _(){var a;k=new AbortController;try{const s=await S(e,Object.assign(Object.assign({},p),{headers:v,signal:k.signal}));await H(s),await Re(s.body,De(Ie(d=>{d?v[re]=d:delete v[re]},d=>{M=d},c))),i?.(),C(),y()}catch(s){if(!k.signal.aborted)try{const d=(a=u?.(s))!==null&&a!==void 0?a:M;window.clearTimeout(F),F=window.setTimeout(_,d)}catch(d){C(),E(d)}}}_()})}function Ke(e){const t=e.headers.get("content-type");if(!t?.startsWith(K))throw new Error(`Expected content-type to be ${K}, Actual: ${t}`)}export{$e as f,We as m};
